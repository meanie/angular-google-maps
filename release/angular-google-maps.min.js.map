{"version":3,"sources":["google.service.js","placesAutocomplete.directive.js"],"names":["angular","$window","google","window","undefined","maps","Error","module","onChange","Google","$timeout","$convert","controller","$attrs","options","scope","geoLocation","center","LatLng","coords","latitude","longitude","setBounds","circle","getBounds","placeChanged","listener","containers","document","getElementsByClassName","removeChild","i"],"mappings":"iBAKAA,eAMOC,OAAQC,8BASZC,QAAQA,iBApBX,UAAA,SAAAF,GCAC,IAAAA,EAASE,SAAiBC,EAAAA,OAAWC,KAAC,MAAA,IAAAC,MAAA,6KAKvCN,eAQEO,OAAO,4CAAA,sCAKHC,sBAAU,gBAAA,WAAA,SAAAC,EAAAC,EAAAC,0DAMZC,SAAAA,mDASQC,QAAOL,EAAUM,2GAoBrBC,SAAMC,EACNhB,OAKEiB,EAAYR,IAAOJ,EAAKa,KACtBH,OAAMC,aAAYG,EAAOC,GAAAA,EACzBL,0IAONL,OAAS,IAAAD,EAAAJ,KAAAa,OAAAH,EAAAC,YAAAG,OAAAC,SAAAL,EAAAC,YAAAG,OAAAE,eAAoDC,UAAAC,EAAAC,0BAK7D,OAASC,EAAAA,KAAAA,eAAe,0BAuBtBC,EAAIC,EAAaC,KAAAA,MAASC,YAAAA,EAAuB,gSAS9C1B,EAAOH,GAAAA,WAzGlB8B,YAAAH,EAAAI","file":"angular-google-maps.min.js","sourcesContent":["(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Google.Maps.Api.Service', [])\n\n/**\n * Wrapper for google maps API\n */\n.factory('GoogleMapsApi', function($window) {\n  if (!$window.google || !$window.google.maps) {\n    throw new Error(\n      'Global `google` variable or `google.maps` missing.' +\n      'Make sure to include the relevant external Google script(s).'\n    );\n  }\n  return $window.google;\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Google.Maps.PlacesAutocomplete.Directive', [\n  'Google.Maps.Api.Service',\n])\n\n/**\n * Directive\n */\n.directive('placesAutocomplete', ['GoogleMapsApi', '$timeout', function(Google, $timeout, $convert) {\n  return {\n    restrict: 'A',\n    scope: {\n      geoLocation: '=',\n      options: '=',\n      onChange: '&',\n    },\n\n    /**\n     * Controller\n     */\n    controller($scope, $attrs) {\n\n      //Set options\n      $scope.options = $scope.options || {};\n\n      /**\n       * Place changed handler\n       */\n      $scope.placeChanged = function(place) {\n        if ($attrs.onChange) {\n          $scope.onChange({\n            place: $convert.object.keysToCamelCase(place),\n          });\n        }\n      };\n    },\n\n    /**\n     * Linking function\n     */\n    link(scope, element) {\n\n      //Initialize autocomplete API now with options\n      let autocomplete = new Google.maps.places.Autocomplete(\n        element[0], scope.options\n      );\n\n      //Set bounds if geo location given\n      if (\n        scope.geoLocation &&\n        angular.isObject(scope.geoLocation) &&\n        scope.geoLocation.coords\n      ) {\n        let circle = new Google.maps.Circle({\n          radius: scope.geoLocation.coords.accuracy,\n          center: new Google.maps.LatLng(\n            scope.geoLocation.coords.latitude,\n            scope.geoLocation.coords.longitude\n          ),\n        });\n        autocomplete.setBounds(circle.getBounds());\n      }\n\n      //Kill auto complete\n      $timeout(() => element.attr('autocomplete', 'goawaygoogle'), 100);\n\n      /**\n       * Place changed handler\n       */\n      function placeChanged() {\n\n        //Get selected place and convert keys\n        let place = autocomplete.getPlace();\n        place.inputValue = element[0].value;\n\n        //Set in scope\n        scope.$apply(() => {\n          scope.placeChanged(place);\n        });\n      }\n\n      /**\n       * Event listener for place changes\n       */\n      let listener = Google.maps.event.addListener(\n        autocomplete, 'place_changed', placeChanged\n      );\n\n      //Event listener for scope destruction\n      scope.$on('$destroy', () => {\n        Google.maps.event.removeListener(listener);\n        Google.maps.event.clearInstanceListeners(autocomplete);\n        let containers = document.getElementsByClassName('pac-container');\n        for (let i = 0; i < containers.length; i++) {\n          containers[i].parentNode.removeChild(containers[i]);\n        }\n      });\n    },\n  };\n}]);\n\n})(window, window.angular);\n"]}